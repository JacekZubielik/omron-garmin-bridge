# ============================================================================
# Omron Garmin Bridge Configuration
# ============================================================================
# Copy this file to config.yaml and adjust values for your setup.
# NEVER commit config.yaml - it contains sensitive data!

# ----------------------------------------------------------------------------
# OMRON Device Configuration
# ----------------------------------------------------------------------------
omron:
  device_model: "HEM-7361T"           # Model: HEM-7361T, HEM-7155T, HEM-7322T, HEM-7600T
  mac_address: "00:5F:BF:91:9B:4B"    # MAC address (optional - if empty, will scan)
  poll_interval_minutes: 60           # How often to poll (0 = manual only)
  read_mode: "new_only"               # "all" or "new_only" (uses -n flag in omblepy)
  sync_time: true                     # Sync device clock with system time

# ----------------------------------------------------------------------------
# User Configuration (OMRON slot -> Garmin account mapping)
# ----------------------------------------------------------------------------
users:
  - name: "User1"
    omron_slot: 1                     # Slot in OMRON device (1 or 2)
    garmin_email: "user@example.com"  # Garmin Connect email
    garmin_enabled: true              # Enable Garmin upload for this user
    mqtt_enabled: true                # Enable MQTT publish for this user

  # Uncomment for second user
  # - name: "User2"
  #   omron_slot: 2
  #   garmin_email: "user2@example.com"
  #   garmin_enabled: true
  #   mqtt_enabled: true

# ----------------------------------------------------------------------------
# Garmin Connect Configuration
# ----------------------------------------------------------------------------
garmin:
  tokens_path: "./data/tokens"        # OAuth tokens directory (per-user subfolders)

# ----------------------------------------------------------------------------
# MQTT Configuration
# ----------------------------------------------------------------------------
mqtt:
  enabled: true
  host: "192.168.40.19"
  port: 1883
  # username: "mqtt_user"             # Optional
  # password: "mqtt_pass"             # Optional
  base_topic: "omron/blood_pressure"  # Base topic for publishing

# ----------------------------------------------------------------------------
# Deduplication (SQLite database)
# ----------------------------------------------------------------------------
deduplication:
  database_path: "./data/omron.db"    # SQLite for tracking uploaded records

# ----------------------------------------------------------------------------
# Backup Configuration
# ----------------------------------------------------------------------------
backup:
  enabled: true
  path: "./data/backup"               # CSV backup directory

# ----------------------------------------------------------------------------
# Web UI (Streamlit)
# ----------------------------------------------------------------------------
web:
  enabled: true
  port: 8501

# ----------------------------------------------------------------------------
# Logging Configuration
# ----------------------------------------------------------------------------
logging:
  level: INFO                         # DEBUG, INFO, WARNING, ERROR
  file: "./logs/omron-bridge.log"     # Log file path
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
